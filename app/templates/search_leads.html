{% extends "base.html" %}
{% block content %}
  <h1>Search Leads</h1>
  <form method="post">
    <div class="form-group">
      <label for="lead_type">Lead Type</label>
      <select id="lead_type" name="lead_type" class="form-control">
        <option value="inbound">Inbound Leads</option>
        <option value="outbound">Outbound Leads</option>
        <option value="mql">MQLs</option>
        <option value="sql">SQLs</option>
      </select>
    </div>
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" class="form-control">
    </div>
    <div class="form-group">
      <label for="from_date">From Date</label>
      <input type="date" id="from_date" name="from_date" class="form-control">
    </div>
    <div class="form-group">
      <label for="to_date">To Date</label>
      <input type="date" id="to_date" name="to_date" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="alert alert-warning mt-3" role="alert">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  {% if results %}
    {% if results|length == 0 %}
      <div class="alert alert-info mt-3" role="alert">
        No leads found matching the criteria.
      </div>
    {% else %}
      <h2>Search Results</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Created At</th>
          </tr>
        </thead>
        <tbody>
          {% for result in results %}
            <tr>
              <td>{{ result.name }}</td>
              <td>{{ result.email }}</td>
              <td>{{ result.phone }}</td>
              <td>{{ result.created_at.strftime('%Y-%m-%d') }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  {% endif %}
{% endblock %}
